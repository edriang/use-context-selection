/*! For license information please see main.4ce6a05e.chunk.js.LICENSE.txt */
(this["webpackJsonpignore-compare-context"]=this["webpackJsonpignore-compare-context"]||[]).push([[0],{12:function(e,t,n){},13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),l=n.n(o),c=(n(12),n(1)),u=(n(13),n(3));var i={}.hasOwnProperty;function s(e,t){if(e===t)return!0;if(!e||!t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var r=n.length;r--;){var o=n[r];if(!i.call(t,o)||e[o]!==t[o]){if("function"===typeof e[o]&&"function"===typeof t[o])continue;return!1}}return!0}var m=Symbol("ContextSelectionConsumer"),f=new Map;function d(e,t){var n=r.a.useContext(e),a=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,r,o=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)l.push(a.value)}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return l}(r.a.useState(t(n)),2),o=a[0],l=a[1],c=r.a.useRef({selection:t,forceUpdate:l});return r.a.useEffect((function(){return f.get(e).add(c.current),function(){f.get(e).delete(c.current)}}),[]),o}function h(e,t){return void 0===t&&(t=s),function(n,a){var r,o;try{for(var l=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],a=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),c=l.next();!c.done;c=l.next()){var u=c.value,i=u.selection(a);t(i,u.selection(n))||u.forceUpdate(i)}}catch(s){r={error:s}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return 0}}function w(e){return function(t){var n=t.children,a=t.numOfRows,o=r.a.useReducer((function(e,t){var n=t.type,a=t.payload,r=void 0===a?{}:a;switch(n){case"INCREMENT":var o=e.rows.slice(0);return o[r.index]=r.value,Object(u.a)({},e,{rows:o});case"SET_ROW_NUMBER":return Object(u.a)({},e,{rows:new Array(r.numOfRows).fill(0).map((function(){return Date.now()}))});default:return e}}),{rows:[]}),l=Object(c.a)(o,2),i=l[0],s=l[1];r.a.useEffect((function(){s({type:"SET_ROW_NUMBER",payload:{numOfRows:a}})}),[a]);var m={rows:i.rows,setRowValue:function(e,t){s({type:"INCREMENT",payload:{index:e,value:t}})}};return r.a.createElement(e.Provider,{value:m},n)}}var p=r.a.createContext({}),v=w(p),y=function(e,t){var n=new Set,a=r.a.createContext(e,h(n,t));return f.set(a,n),a.Consumer=function(e){var t=function(t){var n=t.children,a=t.selection;return n(d(e,void 0===a?function(e){return e}:a))};return t.$$type=m,t}(a),a}({}),E=w(y),b=n(2),g=n.n(b),x=function(e){var t=e.value,n=e.setValue,a=e.name;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("strong",{style:{whiteSpace:"nowrap"}},a)),r.a.createElement("td",null,r.a.createElement("strong",null,"Rendered:"),r.a.createElement("p",null,g()().format("hh:mm:ss.SSS"))),r.a.createElement("td",null,r.a.createElement("strong",null,"Updated:"),r.a.createElement("p",null,g()(t).format("hh:mm:ss.SSS"))),r.a.createElement("td",null,r.a.createElement("button",{style:{whiteSpace:"nowrap"},className:"btn btn-primary btn-sm",onClick:function(){n(Date.now())}},"Update value")))},S=r.a.memo((function(e){var t=e.name,n=e.index,a=r.a.useContext(p),o=a.rows,l=a.setRowValue,c=r.a.useCallback((function(e){return l(n,e)}),[n]);return r.a.createElement(x,{value:o[n],setValue:c,name:t})})),C=r.a.memo((function(e){var t=e.name,n=e.index,a=d(y,(function(e){return{rowValue:e.rows[n],setRowValue:e.setRowValue}})),o=a.rowValue,l=a.setRowValue,c=r.a.useCallback((function(e){return l(n,e)}),[n]);return r.a.createElement(x,{value:o,setValue:c,name:t})}));function R(e,t){var n=document.querySelectorAll(".table.".concat(e," .btn")),a=Date.now();t(!0),function e(t,n,a,r){if(n===t.length)return r(),void alert("Render finished: ".concat(Date.now()-a,"ms"));t[n].click(),window.requestAnimationFrame((function(){e(t,n+1,a,r)}))}(n,0,a,(function(){return t(!1)}))}var k=function(){var e=r.a.useState(300),t=Object(c.a)(e,2),n=t[0],a=t[1],o=r.a.useState(!1),l=Object(c.a)(o,2),u=l[0],i=l[1];return r.a.createElement("div",{className:"App container container-xl ".concat(u?"buttons-disabled":"")},r.a.createElement("div",{className:"pb-5"},r.a.createElement("h1",null,"Performance comparison"),r.a.createElement("p",null,"Enter the number of rows you want to render"),r.a.createElement("div",null,r.a.createElement("input",{type:"number",className:"form-control input-number",value:n,onChange:function(e){return a(parseInt(e.target.value||0))}})),r.a.createElement("p",null,"On the left side, each value is read directly from Context. On the right side, values are read from Context using use-context-selection."),r.a.createElement("p",null,"For each row we render we are displaying the rendered time and a the last time that cell was updated."),r.a.createElement("p",null,"When you click a button its updated-time value is updated and a re-render is triggered. Note that for regular Context that means re-rendering all the rows even though its cell-value didn't change."),r.a.createElement("p",null,"With use-context-selection you can retrieve chunks from your Context and your components will update only when that value is updated, which improves the performance significantly."),r.a.createElement("br",null),r.a.createElement("p",{className:"alert alert-info"},'The "Simulate Click All" button will "click", one by one, on every row-button.',r.a.createElement("br",null),"After clicking on every button an alert message will be displayed showing the amount of time it took to render every row.",r.a.createElement("br",null),r.a.createElement("strong",null,"To experience a real difference in performance enter more than 150 rows; on the left example the time complexity increases exponentially, while on the right example it increases linearly."))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-6"},r.a.createElement("h2",null,"Regular Context",r.a.createElement("button",{disabled:u,className:"btn btn-success btn-sm float-right",onClick:function(){return R("context",i)}},u?"Processing...":"Simulate Click All")),r.a.createElement(v,{numOfRows:n},r.a.createElement("table",{className:"table context"},r.a.createElement("tbody",null,new Array(n).fill(0).map((function(e,t){return r.a.createElement(S,{key:"row-".concat(t),name:"Row ".concat(t+1,"A"),index:t})})))))),r.a.createElement("div",{className:"col col-6"},r.a.createElement("h2",null,"useContextSelection",r.a.createElement("button",{disabled:u,className:"btn btn-success btn-sm float-right",onClick:function(){return R("use-context-selection",i)}},u?"Processing...":"Simulate Click All")),r.a.createElement(E,{numOfRows:n},r.a.createElement("table",{className:"table use-context-selection"},r.a.createElement("tbody",null,new Array(n).fill(0).map((function(e,t){return r.a.createElement(C,{key:"row-".concat(t),name:"Row ".concat(t+1,"B"),index:t})}))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},5:function(e,t,n){e.exports=n(15)}},[[5,1,2]]]);
//# sourceMappingURL=main.4ce6a05e.chunk.js.map